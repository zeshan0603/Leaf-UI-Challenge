<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aladin&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- FONTS -->

    <!-- CSS -->
    <link rel="stylesheet" href="./assets/styles.css">
    <link rel="stylesheet" href="./assets/media.css">
    <!-- CSS -->

</head>

<body>
    <!-- SIGNUP SECTION -->
    <section id="signUp" class="signUp">

        <div class="signUp_imgContainer">
            <img class="hero-image-desktop" src="./assets/images/hero-image.webp" alt="hero image" loading="eager"
                width="400" height="400">
        </div>

        <div class="signUp_Container">

            <div class="logo">
                <img src="./assets/images/leaf.png" alt="leaf icon" loading="eager" width="23" height="23">
                <span>Leaf</span>
            </div>

            <img class="hero-image-mobile" src="./assets/images/hero-image.webp" alt="hero image" loading="eager"
                width="400" height="400">

            <h2>Create Account</h2>

            <form id="signUp_Form" class="signUp_Form">
                <div class="form-field">
                    <label for="username">Full Name</label>
                    <span class="icon" id="icon">
                        <img src="./assets/images/user-icon.png" alt="user icon" loading="eager" height="18" width="18">
                    </span>
                    <input type="text" name="username" id="username" autocomplete="off" placeholder="Enter Full Name">
                    <small>-</small>
                </div>

                <div class="form-field">
                    <label for="email">Email</label>
                    <span class="icon" id="icon">
                        <img src="./assets/images/mail-icon.png" alt="user icon" loading="eager" height="18" width="18">
                    </span>
                    <input type="email" name="email" id="email" autocomplete="off" placeholder="Enter Email">
                    <small>-</small>
                </div>

                <div class="form-field">
                    <label for="password">Password</label>
                    <span class="icon" id="icon">
                        <img src="./assets/images/password-icon.png" alt="user icon" loading="eager" height="18"
                            width="18">
                    </span>
                    <input type="password" name="password" id="password" autocomplete="off"
                        placeholder="Enter Your Password">
                    <small>-</small>
                </div>

                <button type="submit" class="signUp--btn">Sign-Up</button>
            </form>



            <span>- OR -</span>

            <div class="social_icons">
                <span class="social--icon">
                    <img src="./assets/images/google-icon.png" alt="google icon" width="18px" height="18px"
                        loading="eager">
                </span>
                <span class="social--icon">
                    <img src="./assets/images/facebook-icon.png" alt="google icon" width="18px" height="18px"
                        loading="eager">
                </span>
                <span class="social--icon">
                    <img src="./assets/images/apple-icon.png" alt="google icon" width="18px" height="18px"
                        loading="eager">
                </span>
            </div>

            <div class="login-link">
                Already have an account? <a href="login.html">Login</a>
            </div>

        </div>

    </section>
    <!-- SIGNUP SECTION -->

    <script>
        // !FORM VALIDATION
        const usernameEl = document.querySelector('#username');
        const emailEl = document.querySelector('#email');
        const passwordEl = document.querySelector('#password');
        const form = document.querySelector('#signUp_Form');
        const icons = document.getElementsByClassName("icon")






        const checkUsername = () => {

            let valid = false;

            const min = 3,
                max = 25;

            const username = usernameEl.value.trim();

            if (!isRequired(username)) {
                showError(usernameEl, 'Username cannot be blank.');
            } else if (!isBetween(username.length, min, max)) {
                showError(usernameEl, `Username must be between ${min} and ${max} characters.`)
            } else {
                showSuccess(usernameEl);
                valid = true;
            }
            return valid;
        };

        const checkEmail = () => {
            let valid = false;
            const email = emailEl.value.trim();
            if (!isRequired(email)) {
                showError(emailEl, 'Email cannot be blank.');
            } else if (!isEmailValid(email)) {
                showError(emailEl, 'Email is not valid.')
            } else {
                showSuccess(emailEl);
                valid = true;
            }
            return valid;
        };

        const checkpassword = () => {
            let valid = false;
            const password = passwordEl.value.trim();
            if (!isRequired(password)) {
                showError(passwordEl, 'Password cannot be blank.');
            }
            else {
                showSuccess(passwordEl);
                valid = true;
            }
            return valid;
        };

        const isEmailValid = (email) => {
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        };

        const isRequired = value => value === '' ? false : true;
        const isBetween = (length, min, max) => length < min || length > max ? false : true;


        const showError = (input, password) => {
            // get the form-field element
            const formField = input.parentElement;
            // add the error class
            formField.classList.remove('success');
            formField.classList.add('error');


            // show the error password
            const error = formField.querySelector('small');
            error.style.opacity = "1";
            error.textContent = password;

        };

        const showSuccess = (input) => {
            // get the form-field element
            const formField = input.parentElement;

            // remove the error class
            formField.classList.remove('error');
            formField.classList.add('success');

            // hide the error password
            const error = formField.querySelector('small');
            error.textContent = '--';
            error.style.opacity = "0";
        }


        form.addEventListener('submit', function (e) {
            // prevent the form from submitting
            e.preventDefault();

            // validate fields
            let isUsernameValid = checkUsername(),
                isEmailValid = checkEmail(),
                ispasswordValid = checkpassword();

            let isFormValid = isUsernameValid &&
                isEmailValid && ispasswordValid;

            // submit to the server if the form is valid
            if (isFormValid) {
                alert("Form Submitted")
                usernameEl.value = "";
                emailEl.value = "";
                passwordEl.value = "";
            }
        });


        const debounce = (fn, delay = 500) => {
            let timeoutId;
            return (...args) => {
                // cancel the previous timer
                if (timeoutId) {
                    clearTimeout(timeoutId);
                }
                // setup a new timer
                timeoutId = setTimeout(() => {
                    fn.apply(null, args)
                }, delay);
            };
        };

        form.addEventListener('input', debounce(function (e) {
            switch (e.target.id) {
                case 'username':
                    checkUsername();
                    break;
                case 'email':
                    checkEmail();
                    break;

            }
        }));
        // !FORM VALIDATION
    </script>

</body>


</html>